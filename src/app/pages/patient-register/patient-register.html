<section class="register-wrap">
    <header class="title-container">
        <h2 class="title">Registro Paciente</h2>
    </header>

    <article class="form">
        <div class="step-indicator">
            <app-step-indicator 
                [currentStep]="currentStep" 
                [totalSteps]="totalSteps">
            </app-step-indicator>
        </div>

        <div class="form-content">
            @if (currentStep === 1) {
                <app-reusable-form 
                    [title]="'Información Personal'" 
                    [formItems]="personalInfo"
                    [formGroup]="patientForm">
                </app-reusable-form>
            } @else if (currentStep === 2) {
                <app-reusable-form 
                    [title]="'Alergias'" 
                    [formItems]="allergiesItems"
                    [formGroup]="allergiesForm">
                </app-reusable-form>
            } @else if (currentStep === 3) {
                <app-reusable-form 
                    [title]="'Enfermedades Actuales'" 
                    [formItems]="diseasesItems"
                    [formGroup]="diseasesForm">
                </app-reusable-form>
            } @else if (currentStep === 4) {
                <app-reusable-form 
                    [title]="'Antecedentes médicos'" 
                    [formItems]="medicalHistoriesItems"
                    [formGroup]="medicalHistoriesForm">
                </app-reusable-form>
            }
        </div>
    </article>

    <div class="buttons-container">
        @if (!isFirstStep()) {
            <button type="button" class="back" (click)="previousStep()">
                <i class="fa fa-arrow-left"></i>
                Anterior
            </button>
        }
        
        <button type="button" class="next" (click)="isLastStep() ? submitAllData() : nextStep()" [disabled]="isSubmitted">
            @if (isLastStep()) {
                {{ isSubmitted ? 'Enviando...' : 'Finalizar' }}
                <i class="fa fa-check"></i>
            } @else {
                Siguiente
                <i class="fa fa-arrow-right"></i>
            }
        </button>
    </div>
</section>